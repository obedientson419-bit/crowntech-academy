# ğŸ—ï¸ System Architecture

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CROWNTECH ACADEMY                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND LAYER     â”‚              â”‚  BACKEND LAYER       â”‚
â”‚  (Browser/HTML)      â”‚              â”‚  (Node.js/Express)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  index.html          â”‚              â”‚  server.js           â”‚
â”‚  â”œâ”€ Home Section     â”‚              â”‚  â”œâ”€ CORS Middleware  â”‚
â”‚  â”œâ”€ Services         â”‚              â”‚  â”œâ”€ Auth Middleware  â”‚
â”‚  â”œâ”€ Testimonials     â”‚              â”‚  â””â”€ Error Handler    â”‚
â”‚  â”œâ”€ Admin Login      â”‚              â”‚                      â”‚
â”‚  â””â”€ Dashboard        â”‚              â”‚  Routes:             â”‚
â”‚                      â”‚              â”‚  â”œâ”€ /api/auth        â”‚
â”‚  CSS/style.css       â”‚â”€â”€HTTP/RESTâ”€â”€â†’â”œâ”€ /api/students       â”‚
â”‚  â””â”€ Modern Design    â”‚              â”‚  â”œâ”€ /api/courses     â”‚
â”‚     Dark Mode        â”‚â†â”€ JSON/Dataâ”€â”€â”¤  â”œâ”€ /api/contact     â”‚
â”‚                      â”‚              â”‚  â””â”€ /api/admin       â”‚
â”‚  js/main.js          â”‚              â”‚                      â”‚
â”‚  â”œâ”€ API Calls        â”‚              â”‚  Middleware:         â”‚
â”‚  â”œâ”€ Auth Token       â”‚              â”‚  â””â”€ auth.js (JWT)    â”‚
â”‚  â”œâ”€ Dark Mode        â”‚              â”‚                      â”‚
â”‚  â””â”€ Interactions     â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
         â”‚                                     â”‚
      Port: 8000                            Port: 5000
      (webpack-dev-server)              (Express server)
                                              â”‚
                                              â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   DATABASE LAYER     â”‚
                                    â”‚    (MongoDB)         â”‚
                                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                    â”‚  Collections:        â”‚
                                    â”‚  â”œâ”€ admins           â”‚
                                    â”‚  â”œâ”€ students         â”‚
                                    â”‚  â”œâ”€ courses          â”‚
                                    â”‚  â”œâ”€ contacts         â”‚
                                    â”‚  â””â”€ assignments      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                        Port: 27017
                                    (MongoDB local/Atlas)
```

## Request/Response Flow

### Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User        â”‚
â”‚  (Browser)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. Click "Admin Login"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/auth/login    â”‚
â”‚ {email, password}       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. HTTP POST
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: /routes/auth.js â”‚
â”‚ â”œâ”€ Find Admin by email   â”‚
â”‚ â”œâ”€ Verify password       â”‚
â”‚ â””â”€ Generate JWT          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. Query MongoDB
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB            â”‚
â”‚  admins collection  â”‚
â”‚  (Check password)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. Return admin
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response: {token, admin}    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 5. Store token in localStorage
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Logged In             â”‚
â”‚ localStorage.authToken = <JWT>  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Protected API Call Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks  â”‚
â”‚ "Students"   â”‚
â”‚ Tab          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /api/students               â”‚
â”‚ Authorization: Bearer <JWT>     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Send request with token
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Middleware (auth.js)    â”‚
â”‚ â”œâ”€ Extract token from header     â”‚
â”‚ â”œâ”€ Verify JWT signature          â”‚
â”‚ â””â”€ Check expiration              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
    â”Œâ”€â”€â”´â”€â”€â”
    â”‚     â”‚
  âœ“ Valid â”‚ âœ— Invalid
    â”‚     â”‚
    â–¼     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Continue Route  â”‚  â”‚ Return 401       â”‚
â”‚ /students.js    â”‚  â”‚ Unauthorized     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Student.find()               â”‚
â”‚ Query MongoDB                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MongoDB                    â”‚
â”‚ Return: [student docs]     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response: {students}     â”‚
â”‚ (JSON array)             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Display students   â”‚
â”‚ in table/grid               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Organization & Data Flow

```
â”Œâ”€ index.html
â”‚  â””â”€ Display layers (home, admin, dashboard)
â”‚     â””â”€ Call main.js functions
â”‚
â”œâ”€ js/main.js
â”‚  â”œâ”€ handleAdminLogin() â”€â”€â†’ POST /api/auth/login
â”‚  â”œâ”€ loadStudents() â”€â”€â”€â”€â†’ GET /api/students
â”‚  â”œâ”€ loadCourses() â”€â”€â”€â”€â†’ GET /api/courses
â”‚  â””â”€ handleContactSubmit() â”€â”€â†’ POST /api/contact
â”‚
â””â”€ backend/
   â”‚
   â”œâ”€ server.js (Express app)
   â”‚  â””â”€ Mounts all routes below
   â”‚
   â”œâ”€ routes/
   â”‚  â”œâ”€ auth.js (POST /login, /register, GET /profile)
   â”‚  â”œâ”€ students.js (CRUD for students)
   â”‚  â”œâ”€ courses.js (CRUD for courses)
   â”‚  â”œâ”€ contact.js (POST submit, GET list)
   â”‚  â””â”€ admin.js (GET /stats, /analytics)
   â”‚
   â”œâ”€ models/
   â”‚  â”œâ”€ Admin.js (schema + bcrypt)
   â”‚  â”œâ”€ Student.js (schema + ref to Course)
   â”‚  â”œâ”€ Course.js (schema + syllabus array)
   â”‚  â”œâ”€ Contact.js (schema for messages)
   â”‚  â””â”€ Assignment.js (schema for assignments)
   â”‚
   â”œâ”€ middleware/
   â”‚  â””â”€ auth.js (JWT verification)
   â”‚
   â””â”€ package.json (dependencies)
      â”œâ”€ express (web framework)
      â”œâ”€ mongoose (MongoDB ORM)
      â”œâ”€ bcryptjs (password hashing)
      â””â”€ jsonwebtoken (JWT tokens)
```

## API Endpoint Hierarchy

```
http://localhost:5000
â”‚
â”œâ”€ /api/health (GET) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Server status
â”‚
â”œâ”€ /api/auth
â”‚  â”œâ”€ POST /login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Admin login
â”‚  â”œâ”€ POST /register â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Create admin (protected)
â”‚  â”œâ”€ GET /profile â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Current admin (protected)
â”‚  â””â”€ POST /logout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Logout (protected)
â”‚
â”œâ”€ /api/students
â”‚  â”œâ”€ GET / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ List students (protected)
â”‚  â”œâ”€ GET /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Get student
â”‚  â”œâ”€ POST / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Register student
â”‚  â”œâ”€ PUT /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Update student (protected)
â”‚  â”œâ”€ DELETE /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Delete student (protected)
â”‚  â””â”€ GET /stats/count â”€â”€â”€â”€â”€â”€â”€â”€â†’ Student count (protected)
â”‚
â”œâ”€ /api/courses
â”‚  â”œâ”€ GET / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ List courses
â”‚  â”œâ”€ GET /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Get course
â”‚  â”œâ”€ POST / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Create course (protected)
â”‚  â”œâ”€ PUT /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Update course (protected)
â”‚  â””â”€ DELETE /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Delete course (protected)
â”‚
â”œâ”€ /api/contact
â”‚  â”œâ”€ POST / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Submit form
â”‚  â”œâ”€ GET / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ List messages
â”‚  â”œâ”€ GET /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Get message
â”‚  â”œâ”€ PUT /:id/respond â”€â”€â”€â”€â”€â”€â”€â”€â†’ Respond to message
â”‚  â””â”€ DELETE /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Delete message
â”‚
â””â”€ /api/admin
   â”œâ”€ GET /stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Dashboard stats (protected)
   â”œâ”€ GET /activities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Recent activities (protected)
   â””â”€ GET /analytics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Analytics data (protected)
```

## Data Models & Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ADMIN     â”‚                    â”‚   STUDENT    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id          â”‚                    â”‚ _id          â”‚
â”‚ name         â”‚                    â”‚ name         â”‚
â”‚ email        â”‚                    â”‚ email        â”‚
â”‚ password     â”‚                    â”‚ phone        â”‚
â”‚ role         â”‚                    â”‚ course â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ permissions  â”‚                    â”‚ status       â”‚   â”‚   COURSE     â”‚
â”‚ lastLogin    â”‚                    â”‚ progress     â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isActive     â”‚                    â”‚ createdAt    â”‚   â”‚ _id          â”‚
â”‚ createdAt    â”‚                    â”‚ updatedAt    â”‚   â”‚ title        â”‚
â”‚ updatedAt    â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ description  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚ instructor   â”‚
                                                       â”‚ level        â”‚
                                                       â”‚ duration     â”‚
                                                       â”‚ price        â”‚
                                                       â”‚ capacity     â”‚
                                                       â”‚ createdAt    â”‚
                                                       â”‚ updatedAt    â”‚
                                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CONTACT    â”‚                    â”‚ ASSIGNMENT   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id          â”‚                    â”‚ _id          â”‚
â”‚ name         â”‚                    â”‚ title        â”‚
â”‚ email        â”‚                    â”‚ course â”€â”€â”   â”‚
â”‚ message      â”‚                    â”‚ dueDate  â”‚   â”‚
â”‚ status       â”‚                    â”‚ points   â”‚   â”‚
â”‚ response     â”‚                    â”‚ submiss. â”‚   â”‚
â”‚ createdAt    â”‚                    â”‚ createdAtâ”‚   â”‚
â”‚ updatedAt    â”‚                    â”‚ updatedAtâ”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”˜
                                              â”‚
                                              â””â”€â†’ (references Course)
```

## Authentication Token Flow

```
Login Request
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Verify Credentials      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Find admin by email  â”‚
â”‚ 2. Compare password     â”‚
â”‚ 3. Check if active      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€ âœ“ Valid â”€â”€â†’ Create JWT
     â”‚              â””â”€â†’ jwt.sign({id, email, role}, SECRET)
     â”‚              â””â”€â†’ Token expires in 24 hours
     â”‚
     â””â”€ âœ— Invalid â”€â”€â†’ Return 401 Unauthorized

JWT Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header                 â”‚
â”‚  {alg: "HS256", ...}    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Payload                â”‚
â”‚  {id: "...", email, ..} â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Signature              â”‚
â”‚  HMAC-SHA256(secret)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Verification:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Request with token              â”‚
â”‚ Authorization: Bearer <JWT>     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ middleware/auth.js              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Extract token from header    â”‚
â”‚ 2. Verify signature (JWT_SECRET)â”‚
â”‚ 3. Check expiration             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€ âœ“ Valid â”€â”€â†’ req.user = decoded payload
     â”‚               Continue to route
     â”‚
     â””â”€ âœ— Invalid â”€â”€â†’ Return 401 Unauthorized
```

## Database Operations

```
Frontend Request
     â”‚
     â–¼
Express Route Handler
     â”‚
     â”œâ”€ Validate input
     â”œâ”€ Check authentication (if protected)
     â”‚
     â–¼
Mongoose Operation
     â”‚
     â”œâ”€ Model.find()        â†’ Read operations
     â”œâ”€ Model.findById()    â†’ Specific record
     â”œâ”€ Model.create()      â†’ Create new
     â”œâ”€ Model.updateOne()   â†’ Update record
     â””â”€ Model.deleteOne()   â†’ Remove record
     â”‚
     â–¼
MongoDB
     â”‚
     â”œâ”€ Execute query
     â”œâ”€ Return result
     â”‚
     â–¼
Mongoose
     â”‚
     â”œâ”€ Validate schema
     â”œâ”€ Format response
     â”‚
     â–¼
Express Handler
     â”‚
     â”œâ”€ Convert to JSON
     â””â”€ Send HTTP response
     â”‚
     â–¼
Frontend
     â”‚
     â”œâ”€ Parse response
     â””â”€ Update UI
```

---

This architecture provides:
- **Separation of Concerns** (Frontend, Backend, Database)
- **Security** (JWT authentication, password hashing)
- **Scalability** (RESTful API, modular routes)
- **Maintainability** (Clear file structure, proper error handling)
- **Real-time Data** (API integration between all layers)
